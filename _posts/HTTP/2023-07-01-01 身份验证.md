---
layout:     post
title:      身份验证
subtitle:  
date:       2023-07-01
author:     
header-img: 
catalog: true
tags:
  - HTTP 相关内容
typora-root-url: ..
---

### 常见的身份认证信息

- 密码
- 动态令牌
- 数字证书
- 生物认证（指纹，虹膜）
- IC 卡

### 常见认证方式

#### Basic 认证（基本认证）

![image-20230701222721989](/../img/postImage/image-20230701222721989.png)

1. 当请求需要 basic 验证时，服务器会返回 `401` 状态码，告诉客户端需要验证。
2. 接收到 401状态吗的客户端为了通过验证，需要将用户名，密码发送给服务器。**发送的内容是由用户名和密码构成的，两者之间由冒号链接，再经过 Base64 编码处理。**然后把编码之后处理的结果放在首部 `Authorization` 字段，**前面加上 Basic + 空格**。（用户只需要输入用户名和密码，浏览器会自动完成 Base64编码。）
3. 之后服务器接受到请求，就会验证一下信息的正确性，如果验证正确，就返回状态码为 200 的资源响应。如果失败，则继续返回 401。

> 虽然采用的是 Base64 处理，但这并不是加密处理，不需要任何信息就可以对base64进行解码，总而言之，一旦被窃听，被盗的可能性很高。使用上也不够灵活，达不到安全性等级。

#### Digest 认证（摘要认证）

为弥补 Basic 认证存在的弱点，从 HTTP/1.1 起就有了 Digest 认证。

 Digest 认证使用质询 / 响应的方式，但不会像 Basic 认证那样直接发送明文密码。比 basic 验证多了一层保护机制，密码泄漏的可能行降低。

> 质询 / 响应：一方会先发送认证要求给另一方，接着使用从另一方接收到的质询码，计算生产响应码。最后讲相应码返回给对方进行认证。

![image-20230701223329685](/../img/postImage/image-20230701223329685.png)

但是同样，使用上也不够灵活，达不到安全性等级。

#### SSL 客户端认证

SSL 客户端认证是借由 `HTTPS 的客户端证书`完成认证的方式。凭借客户端证书认证，服务器可确认访问是否来自自己登录的客户端。

**具体实现**

1. 接收到需要资源认证的请求，服务器会发送一个 `certificate request` 的报文要求客户端提供客户端证书。
2. 接着用户选择发送客户端证书后，客户端会把证书信息已 `client certificate` 这种报文的格式发给服务器。
3. 服务器验证客户端证书，验证通过后，就可以领取证书内的公开密钥，然后开始 https 的加密通信。

**缺点是：具有一定的成本。**

#### FormBase 认证

基于表单的认证是目前用的最多的。

- 基于表单的认证方法并不是在 HTTP 协议中定义的。
- 使用由 Web 应用程序各自实现基于表单的认证方式。
- 通过 Cookie 和 Session 的方式来保持用户的状态。