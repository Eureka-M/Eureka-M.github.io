---
layout:     post
title:      Http
subtitle:  
date:       2023-06-21
author:     
header-img: 
catalog: true
tags:
  - HTTP 相关内容
typora-root-url: ..
---

## Http

#### 三次握手

<img src="/../img/postImage/image-20230621230111840.png" alt="image-20230621230111840" style="zoom: 50%;" />

**三次握手的目的**：客户端 / 服务端都能确定对方的收发能力都是正常的。

第一次握手：

服务端得出结论：客户端的发送能力是正常的，服务端的接受能力是正常的。

第二次握手：

客户端得出结论：服务端接受能力是正常的，发送能力也是正常的，同时表示确认客户端的发送能力。客户段的接收能力也是正常的。

第三次握手：

服务端得出结论：服务端只知道客户端的发送能力和服务端的接受能力是正常的（前1， 2 次 无法确认服务端的发送能力和客户端的接收能力）这个时候服务端可以确定 客户端的接受能力和服务端的发送能力是正常的。

经历以上三次，客户端和服务端都知道自己的接受/发送能力正常。

#### http 特点

- 客户 / 服务器模式：请求由客户端发起，服务端响应请求，并进行相应服务。

- 简单快速：只需要传入请求的方法和路径。协议简单，使得 http 服务器的程序规模小，因而通信速度很快。

- 灵活：http 允许传输任意类型的数据对象。

- 无连接：

    每次连接只处理一个请求。服务器处理完客户的请求之后，并收到客户的应答之后，就会断开链接。采用这种方式可以节约传输时间。（传输关联性低，在一次请求之后若是长时间不会来下一次请求，就会导致资源的浪费。）

    如果说请求很频繁，比如说网页需要请求很多图片的时候，每次链接之后断开连接也是一个比较浪费的操作。keep-alive 就可以解决这个问题。重用的这样一个连接是 TCP 连接。

- 无状态：

    协议对于事务处理没有记忆能力。缺少状态意味着如果后续的处理需要前面的信息，则必须重传。这样可能导致每次连接传输的数据量大。

#### http 报文结构

![image-20230621230931678](/../img/postImage/image-20230621230931678.png)

##### http 报文头

大致分为四类：通用报文头，请求报文头，响应报文头和实体报文头。

###### 通用报文头

<img src="/../img/postImage/image-20230621231135300.png" alt="image-20230621231135300" style="zoom:67%;" />

###### 请求报文头

<img src="/../img/postImage/image-20230621231211560.png" alt="image-20230621231211560" style="zoom:67%;" />

###### 响应报文头

<img src="/../img/postImage/image-20230621231241058.png" alt="image-20230621231241058" style="zoom:67%;" />

###### 实体报文头

<img src="/../img/postImage/image-20230621231307711.png" alt="image-20230621231307711" style="zoom:67%;" />

##### http 请求方法

###### Get

Get 方法用来请求访问已被 URI 识别的资源。指定的资源经服务器端解析后返回响应内容。

Get 请求有长度限制，它的请求参数放在 url 中。

###### Post

Post 方法与 Get 功能类似，一般用来传输实体的主体。

Post 参数放在请求体中。

###### Put

Put 从客户端像服务器传送的数据取代指定的文档的内容。Put 方法与 Post 方法最大的不同的是，Put 是幂等的，而 Post 不是幂等的。Put 方法更多的时候用于传输资源。

###### Head

类似于 Get 请求，只不过返回中没有具体的内容，用于获取`报文头`。

经常用于测试超链接的有效性。

###### Delete

请求服务器删除指定的资源。

缺点：没有验证机制，容易被攻击者利用。

###### Trace

回显服务器收到的请求，主要用于测试或者诊断。

客户端可以通过 trace 查看请求是如何被篡改的，这是因为请求想要连接到目标服务器的时候，可能会通过代理中转。

但是容易引发一种攻击方式：XST （跨站追踪）。

###### Connect

开启一个客户端与所请求资源之间的双向沟通的通道，它可以用来创建隧道。

不常用，网页上基本不会用到。

可能应用的场景：在使用代理服务器访问互联网的时候，就是使用 connect 。比如说我们通过 http 代理去访问 facebook，浏览器向代理服务器发送一个 connect 请求，代理服务器返回 http 200。表示链接已经建立。之后浏览器和服务器就开始建立连接。代理服务器只负责传输数据包。

