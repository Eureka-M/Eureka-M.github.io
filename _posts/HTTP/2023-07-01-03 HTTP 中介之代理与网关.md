---
layout:     post
title:      HTTP 中介之代理与网关
subtitle:  
date:       2023-07-01
author:     
header-img: 
catalog: true
tags:
  - HTTP 相关内容
typora-root-url: ..
---

### 代理

#### 定义

![image-20230701230701980](/../img/postImage/image-20230701230701980.png)

**代理**：即是客户端，也是服务端，可以对请求进行拦截，抓取，甚至是二次处理。

**常见的代理服务器**：FIddler, charles。

#### 代理的作用

- 抓包：拦截服务器

- 翻墙

    ![image-20230701230907029](/../img/postImage/image-20230701230907029.png)

    > VPN：看起来和代理很像，实则原理不一样。VPN 采用的是**隧道技术**。它用来在 IP 公网中仿真点与点之间的通路。实现了两个点（VPN 网关之间，或者是VPN 网关与VPN远程用户）之间的安全通信，使数据包在公共网络上的专用隧道内传输。隧道技术实质是如何利用一种网络层协议来传输另一种网络层协议，这个基本功能是封装和加密，主要利用隧道协议来实现。VPN 主要是在数据链路层或者网络层实现的。

- 匿名访问

    **http 协议本身是带有匿名性的，是指 http 通过删除代理服务器报文中的身份特性（比如 ip 地址，cookie, sessionID）从而对远端服务器隐藏原始用户的身份信息**。而代理服务器上也不会记录原始用户访问的 log，这样就使得使用代理访问的用户可以在更加安全，隐秘的环境中访问网络。

- 过滤器

    ![image-20230701231119396](/../img/postImage/image-20230701231119396.png)

### 网关

网关可以作为某种翻译器使用，它抽象出了一种能够到达资源的方法。网关是资源和应用程序之间的粘合剂。网关扮演的是 “协议转换器” 的角色。

![image-20230701231333371](/../img/postImage/image-20230701231333371.png)

- 代理连接的是两个或者多个使用相同协议的应用程序（端点）。

- 而网关连接的是两个或者多个使用不同协议的应用程序（端点）。所以说网关扮演的是协议转换器的角色。网关可以向数据库发送查询数据，可以发邮件，或者生成动态的内容。

#### 网关分类

web 网关在一侧使用 HTTP 协议，在另一侧使用另一种协议。

```
《客户端协议》 / 《服务端协议》
```

- （HTTP / ）服务器端网关：通过 HTTP 协议与客户端对话，通过其他协议与服务器通信。
- （/ HTTP）客户端网关：通过其他协议与客户端对话，通过 HTTP 协议与服务器通信。

#### 常见网关类型

- （HTTP / * ）服务器端 Web 网关

    客户端发送 http 请求，web 网关会把这个协议转换成其他协议来与服务器进行连接。完成资源获取以后，会将对象放在一条 http 响应中发送给客户端。

- （HTTP / HTTPS ）服务器端安全网关

    客户端发送 http 请求，web 网关会加密这个 http 请求，然后再发送给服务器。

- （HTTPS / HTTP ）客户端安全加速器网关

    客户端发送的请求是经过加密的，安全的请求，通过网关进行解密，向 web 服务器发送普通的 http请求。**这些网关中通常包含一些专用的解密软件。解密的效率高于原始服务器，可以减轻一些原始服务器的负荷。**

- 资源网关

    客户端通过 http 连接到服务器，服务器并不回送文件，而是将请求通过网关的 api 发送给运行在服务器上的应用程序。应用程序将请求资源回送给服务端。

- 安全网关

    结合服务器端安全网关和客户端安全加速器网关。实现 http -> https -> http